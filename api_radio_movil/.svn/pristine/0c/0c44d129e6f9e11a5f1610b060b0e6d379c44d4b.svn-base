import express from 'express';

import { updateUsers } from '../controllers/controllerUsersSet.js';
import { validaLogin } from '../controllers/controllerUsersMovil.js';

import { getPropuestasByUser, autorizarPropuestas, getPropuestasPendientesByUser, desautorizarPropuestas } from '../controllers/controllerPorpuestasMovil.js';
import { updatePropuestas, deletePropuestasPagadas, getPropuestasModificadasMovil } from '../controllers/controllerPorpuestasSet.js';

// import { registerUser, verifiyAccount, login, getUser } from '../controllers/authController.js';
// import authMiddleware from '../middlewares/authMiddleware.js';

const router = express.Router();

//USUARIOS__________________________________
//SET
router.post('/users', updateUsers);

//MOVIL
router.post('/login', (req, res, next) => {
  // console.log("Headers:", req.headers);
  // console.log("Body:", req.body);
  // console.log("Origin:", req.headers.origin);
  next();
}, validaLogin);

//PROPUESTAS______________________________--

//SET
router.get('/propuestas-modificadas', getPropuestasModificadasMovil);
router.post('/propuestas', updatePropuestas);
router.delete('/propuestas', deletePropuestasPagadas);
// router.get('/propuestas', getPropuestas);
//MOVIL
router.get('/propuestas/user/:clave_usuario', getPropuestasByUser);
router.get('/propuestas-pendientes/user/:clave_usuario', getPropuestasPendientesByUser);
router.post('/autorizar-propuestas', autorizarPropuestas);
router.post('/desautorizar-propuestas', desautorizarPropuestas);

// router.post('/test', (req, res, next) => {
//   console.log("Headers:", req.headers);
//   console.log("Body:", req.body);
//   console.log("Origin:", req.headers.origin);
//   next();
// }, test1);



// router.get('/verify/:token', verifiyAccount);
// router.post('/login', login);
// router.get('/user', authMiddleware, getUser)

export default router